# [438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯](https://leetcode-cn.com/problems/find-all-anagrams-in-a-string/)

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ pï¼Œæ‰¾åˆ° s ä¸­æ‰€æœ‰ p çš„ å¼‚ä½è¯ çš„å­ä¸²ï¼Œè¿”å›è¿™äº›å­ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚ä¸è€ƒè™‘ç­”æ¡ˆè¾“å‡ºçš„é¡ºåºã€‚

å¼‚ä½è¯ æŒ‡ç”±ç›¸åŒå­—æ¯é‡æ’åˆ—å½¢æˆçš„å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ç›¸åŒçš„å­—ç¬¦ä¸²ï¼‰ã€‚

## æ€è·¯ï¼š

### 	æš´åŠ›æ³•ï¼š

ä¸€å¼€å§‹æˆ‘å°±æƒ³åˆ°äº†ç”¨æ»‘åŠ¨çª—å£ï¼Œæ¯æ¬¡åˆ¤æ–­æ»‘åŠ¨çª—å£é‡Œé¢çš„è¯æ˜¯ä¸æ˜¯å­—æ¯å¼‚ä½è¯ï¼Œä½†åœ¨åˆ¤æ–­è¿™ä¸€æ­¥ä¸çŸ¥é“ç”¨ä»€ä¹ˆæ–¹æ³•å®ç°ï¼Œä¸€å¼€å§‹æƒ³ç€ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨å­˜å‚¨p,ç„¶åéå†æ»‘åŠ¨çª—å£ä¸­çš„è¯ï¼Œä½†è½¬å¿µä¸€æƒ³ï¼Œè¿™ä¸å°±è·Ÿæš´åŠ›æ³•ä¸€æ‘¸ä¸€æ ·äº†å˜›ï¼Œç„¶åè‡ªå·±å†™äº†ä¸ªæš´åŠ›æ³•ï¼Œæœç„¶è¶…æ—¶äº†ã€‚

```c++
class Solution {
public:
    bool ifTrue(string s,int i, int j,unordered_map<char,int> hash)
    {
        if(j >= s.size()) return false;
        for(int left = i; left <= j; left++)
        {
            if(hash.find(s[left]) != hash.end()){
                hash[s[left]]--;
                if(hash[s[left]] == 0)
                    hash.erase(s[left]);
            }else
                return false;
        }
        return hash.empty();
    }
    vector<int> findAnagrams(string s, string p) {
        unordered_map<char,int> hash;
        vector<int> res;
        for(auto x : p) hash[x]++;
        for(int i = 0; i < s.size(); i++)
        {
            if(ifTrue(s,i,i+p.size()-1,hash))
                res.push_back(i);
        }
        return res;
    }
};
```

### 	æ»‘åŠ¨çª—å£ï¼š

ç„¶åçœ‹è§£æï¼Œ**åˆ©ç”¨æ•°ç»„æ¥å­˜å‚¨çª—å£å†…æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åæ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰**ã€‚

```c++
class Solution {
public:
    vector<int> findAnagrams(string s, string p) {
        int ns = s.size();
        int np = p.size();
        if(ns < np) return vector<int>{};
        vector<int> vs(26,0);
        vector<int> vp(26,0);
        vector<int> res;

        for(int i = 0; i < np; i++){
            vs[s[i] - 'a']++;
            vp[p[i] - 'a']++;
        }
        if(vs == vp) res.push_back(0);

        for(int i = 0; i < ns - np;i++)
        {
            vs[s[i] - 'a']--;
            vs[s[i + np] - 'a']++;
            if(vs == vp) res.push_back(i+1);
        }
        return res;
    }
};
```



# 

# [76. æœ€å°è¦†ç›–å­ä¸²](https://leetcode-cn.com/problems/minimum-window-substring/)

```c++
class Solution {
public:
    string minWindow(string s, string t) {
        unordered_map<char,int> hs, ht;
        int ns = s.size();
        int nt = t.size();
        for(auto c : t) ht[c]++;
        string res;
        int cnt = 0;
        for(int i = 0, j = 0; j < ns; j++)
        {
            hs[s[j]]++;
            if( hs[s[j]] <= ht[s[j]]) cnt++;
            while( hs[s[i]] > ht[s[i]]) hs[s[i++]]--;
            if(cnt == nt){
                if(res.empty() || j - i + 1 < res.size()) res = s.substr(i,j - i + 1);
            }
        }
        return res;
    }
};
```



# [1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III](https://leetcode-cn.com/problems/max-consecutive-ones-iii/)

## æ³•ä¸€ï¼š

- ç”¨ä¸€ä¸ªå˜é‡å®æ—¶ç»´æŠ¤æ»‘åŠ¨çª—å£å†…`0`çš„æ•°é‡ï¼Œè‹¥è¶…è¿‡äº†`k`ï¼Œåˆ™ç§»åŠ¨å·¦è¾¹ç•Œç›´è‡³`0`çš„ä¸ªæ•°å°äºç­‰äº`k`

```c++
class Solution {
public:
    int longestOnes(vector<int>& nums, int k) {
        int i = 0;
        int res = 0;
        int cnt = 0;
        for(int j = 0; j < nums.size(); j++){
            while(cnt >= k && nums[j] == 0){
                if(nums[i] == 0){
                    cnt--;
                }
                i++;
            }
            res = max(j - i + 1,res);
            if(nums[j] == 0 && cnt < k) cnt++;
        }
        return res;
    }
};
```

## æ³•äºŒï¼š

é¦–å…ˆå°†é¢˜æ„è½¬æ¢ä¸€ä¸‹ï¼š

- å¯¹äºä»»æ„çš„å³ç«¯ç‚¹rightï¼Œå¸Œæœ›æ‰¾åˆ°æœ€å°çš„å·¦ç«¯ç‚¹leftï¼Œä½¿å¾—[left,right] åŒ…å«ä¸è¶…è¿‡ k ä¸ª 0
- åªè¦æˆ‘ä»¬æšä¸¾æ‰€æœ‰å¯èƒ½çš„å³ç«¯ç‚¹ï¼Œå°†å¾—åˆ°çš„åŒºé—´çš„é•¿åº¦å–æœ€å¤§å€¼ï¼Œå³å¯å¾—åˆ°ç­”æ¡ˆ

**æƒ³è¦å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªåŒºé—´å†… 0 çš„ä¸ªæ•°ï¼Œå¯ä»¥è€ƒè™‘å°†ç»™å®šæ•°ç»„ä¸­çš„ 0 å˜ä¸º 1ï¼Œ 1 å˜ä¸º 0ï¼Œåˆ™å¯¹äºåŒºé—´[left,right]ä¸­ 0çš„æ•°é‡ï¼Œå¯ä»¥ç”¨å‰ç¼€å’Œæ±‚å‡ºï¼Œå³**

- `prefix[right] - prefix[left - 1]`

çª—å£ç§»åŠ¨è¿‡ç¨‹ä¸­ä¿è¯`prefix[right] - prefix[left - 1] <= k`

**ä»£ç **

```c++
class Solution {
public:
    int longestOnes(vector<int>& nums, int k) {
        int lSum = 0, rSum = 0,left = 0;
        int res = 0;
        for(int right = 0; right < nums.size(); right++){
            rSum += 1 - nums[right];
            while(rSum - lSum > k){
                lSum += 1 - nums[left++];
            }

            res = max(res, right - left + 1);
        }
        return res;
    }
};
```



# [1493. åˆ æ‰ä¸€ä¸ªå…ƒç´ ä»¥åå…¨ä¸º 1 çš„æœ€é•¿å­æ•°ç»„](https://leetcode-cn.com/problems/longest-subarray-of-1s-after-deleting-one-element/)

è¯¥é¢˜ä¸[1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III](https://leetcode-cn.com/problems/max-consecutive-ones-iii/)ç±»ä¼¼ï¼Œåªæ˜¯å°† k å›ºå®šä¸º 1

```c++
class Solution {
public:
    int longestSubarray(vector<int>& nums) {
        int i = 0;
        int res = 0;
        int cnt = 0;
        for(int j = 0; j < nums.size(); j++){
            while(cnt >= 1 && nums[j] == 0){
                if(nums[i] == 0){
                    cnt--;
                }
                i++;
            }
            res = max(j - i,res);
            if(nums[j] == 0 && cnt < 1) cnt++;
        }
        return res;
    }
};
```



# [424. æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦](https://leetcode-cn.com/problems/longest-repeating-character-replacement)

## æ™®é€šæ»‘åŠ¨çª—å£æ€è·¯ï¼š

- çª—å£å†…éæœ€é•¿é‡å¤å­—ç¬¦æ•°é‡è¶…è¿‡ k ä¸ªåï¼Œçª—å£å·¦ç§»ï¼Œç›´æ¥å…¶æ•°é‡å°äº k

ç»™å®šå­—ç¬¦ä¸²ä¸­åªåŒ…å«26ä½å¤§å†™å­—æ¯ï¼Œå› æ­¤å¯ä»¥ç”¨æ•°ç»„ç»´æŠ¤çª—å£å†…å…ƒç´ 

```c++
class Solution {
    int cnt[26];
public:
    int characterReplacement(string s, int k) {
        int n = s.size(), i = 0;
        //åˆ¤æ–­çª—å£å†…å…ƒç´ æ˜¯å¦æ»¡è¶³é¢˜æ„
        auto fail = [&]()->bool{
            //è®¡ç®—å½“å‰çª—å£å†…æ•°é‡æœ€å¤šå…ƒç´ çš„æ•°é‡ä»¥åŠçª—å£å†…æ€»å…ƒç´ æ•°é‡
            int mx = *max_element(cnt, cnt + 26), all = accumulate(cnt, cnt + 26, 0);
            return all - mx > k;
        };
        int ans = 1;
        for (int j = 0; j < n; j++) {
            cnt[s[j] - 'A']++;
            while(i < j && fail()) cnt[s[i++] - 'A']--;
            ans = max(ans, j - i + 1);
        }
        return ans;
    }
};
```



## **ä¿è¯çª—å£åªå¢ä¸å‡**

å‚è€ƒé¢˜è§£[ğŸ¦ æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦ - æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/longest-repeating-character-replacement/solution/ti-huan-hou-de-zui-chang-zhong-fu-zi-fu-eaacp/)

- æšä¸¾å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªä½ç½®ä½œä¸ºå³ç«¯ç‚¹ï¼Œç„¶åæ‰¾åˆ°å…¶æœ€è¿œçš„å·¦ç«¯ç‚¹çš„ä½ç½®ï¼Œæ»¡è¶³è¯¥åŒºé—´å†…é™¤äº†å‡ºç°æ¬¡æ•°æœ€å¤šçš„é‚£ä¸€ç±»å­—ç¬¦ä¹‹å¤–ï¼Œå‰©ä½™çš„å­—ç¬¦ï¼ˆå³éæœ€é•¿é‡å¤å­—ç¬¦ï¼‰æ•°é‡ä¸è¶…è¿‡ k ä¸ªã€‚
- æ¯æ¬¡å³æŒ‡é’ˆå³ç§»ï¼Œå¦‚æœåŒºé—´ä»ç„¶æ»¡è¶³æ¡ä»¶ï¼Œé‚£ä¹ˆå·¦æŒ‡é’ˆä¸ç§»åŠ¨ï¼Œå¦åˆ™å·¦æŒ‡é’ˆè‡³å¤šå³ç§»ä¸€æ ¼ï¼Œä¿è¯åŒºé—´é•¿åº¦ä¸å‡å°ã€‚
  - è™½ç„¶è¿™æ ·çš„æ“ä½œä¼šå¯¼è‡´éƒ¨åˆ†åŒºé—´ä¸ç¬¦åˆæ¡ä»¶ï¼Œå³è¯¥åŒºé—´å†…éæœ€é•¿é‡å¤å­—ç¬¦è¶…è¿‡äº† kä¸ªã€‚ä½†æ˜¯è¿™æ ·çš„åŒºé—´ä¹ŸåŒæ ·ä¸å¯èƒ½å¯¹ç­”æ¡ˆäº§ç”Ÿè´¡çŒ®
    - æŒ‰ç…§æ­£å¸¸æ€è·¯ï¼Œæ­¤æ—¶å³æŒ‡é’ˆåº”è¯¥ä¿æŒä¸åŠ¨ï¼Œè€Œå·¦æŒ‡é’ˆæŒç»­å³ç§»ï¼Œç›´è‡³åŒºé—´æ»¡è¶³æ¡ä»¶
    - ä½†æ˜¯ç”±äºæˆ‘ä»¬æ±‚çš„æ˜¯æœ€å¤§çª—å£ï¼Œåªè€ƒè™‘çª—å£å¢å¤§çš„æƒ…å†µï¼Œå› æ­¤å·¦æŒ‡é’ˆæœ€å¤šç§»åŠ¨ä¸€ä½ï¼Œä¿æŒçª—å£å¤§å°ä¸å˜
- éå†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªç»´æŠ¤çª—å£å†…æœ€å¤šå…ƒç´ çš„æœ€å¤§æ•°é‡ï¼Œå½“å·¦è¾¹ç•Œå³ç§»æ—¶ï¼Œè‹¥æœ€å¤§æ•°é‡æ”¹å˜ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å»å°†çª—å£å†…æœ€å¤šå…ƒç´ çš„æœ€å¤§æ•°é‡å‡ä¸€
  - è¦æƒ³è·å¾—æ›´å¤§çš„å­ä¸²ï¼Œçª—å£å†…æœ€å¤šå…ƒç´ çš„æœ€å¤§æ•°é‡ä¸€å®šæ˜¯éé€’å‡çš„



```c++
class Solution {
public:
    int characterReplacement(string s, int k) {
        int i = 0;
        int maxCount = 0;
        int res = 0;
        vector<int> cnt(26);
        for(int j = 0; j < s.size(); j++){
            cnt[s[j] - 'A']++;
            maxCount = max(maxCount, cnt[s[j] - 'A']);
            //å½“å‰çª—å£å†…å…ƒç´ æ•°é‡len = j - i + 1
            //éæœ€é•¿é‡å¤å­—ç¬¦æ•°é‡ä¸º len - maxCount
            if(j - i + 1 - maxCount > k){
                cnt[s[i++] - 'A']--;
            }
            res = max(res, j - i + 1);
        }
        return res;
    }
};
```

**å®˜æ–¹é¢˜è§£ï¼š**

```c++
class Solution {
public:
    int characterReplacement(string s, int k) {
        vector<int> num(26);
        int n = s.length();
        int maxn = 0;
        int left = 0, right = 0;
        while (right < n) {
            num[s[right] - 'A']++;
            maxn = max(maxn, num[s[right] - 'A']);
            if (right - left + 1 - maxn > k) {
                num[s[left] - 'A']--;
                left++;
            }
            right++;
        }
        return right - left;
    }
};
```



# [1438. ç»å¯¹å·®ä¸è¶…è¿‡é™åˆ¶çš„æœ€é•¿è¿ç»­å­æ•°ç»„](https://leetcode-cn.com/problems/longest-continuous-subarray-with-absolute-diff-less-than-or-equal-to-limit/)

```c++
class Solution {
public:
    int longestSubarray(vector<int>& nums, int limit) {
        //ç»´æŠ¤ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œæ»‘åŠ¨çª—å£å†…çš„æœ€å¤§å€¼ä¸æœ€å°å€¼ä¹‹å·®å°äºç­‰äº limit
        //åˆ©ç”¨setçš„æœ‰åºç‰¹æ€§ï¼Œç”¨äºç»´æŠ¤çª—å£å†…å…ƒç´ 
        multiset<int> mp;
        int i = 0, res = 0;
        for(int j = 0; j < nums.size(); j++){
            mp.insert(nums[j]);
            while(*mp.rbegin() - *mp.begin() > limit){
                mp.erase(mp.find(nums[i++]));
            }
            res = max(res, j - i + 1);
        }
        return res;
    }
};
```

